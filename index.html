<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title></title>
        <script type="text/javascript">

            function init() {

                canvas = document.getElementById('canvas');
                context = canvas.getContext('2d');
                canvas.width = 640;
                canvas.height = 480;
                context.lineWidth = 2;

                // Calculate min length needed
                // to reach canvas edges.
                var x = canvas.width/2;
                var y = canvas.height/2
                var length = Math.sqrt(x*x + y*y);
                length *= 99999; // XXX
                //length = 64;

                draw = function(angle) {

                    context.clearRect ( 0 , 0 , canvas.width , canvas.height );

                    var eighth = Math.PI/4;
                    var points = [];

                    // Center
                    points.push({
                        x: canvas.width/2,
                        y: canvas.height/2
                    });

                    // Bottom Middle
                    points.push({
                        x: canvas.width/2,
                        y: canvas.height
                    });

                    if(angle >= eighth * 2) {

                        // Bottom Right
                        points.push({
                            x: canvas.width,
                            y: canvas.height
                        });

                        // Middle Right
                        points.push({
                            x: canvas.width,
                            y: canvas.height/2
                        });
                    }

                    if(angle >= eighth * 3) {

                        // Top Right
                        points.push({
                            x: canvas.width,
                            y: 0
                        });
                    }

                    if(angle >= eighth * 4) {

                        // Top Middle
                        points.push({
                            x: canvas.width/2,
                            y: 0
                        });
                    }

                    if(angle >= eighth * 6) {

                        // Top Left
                        points.push({
                            x: 0,
                            y: 0
                        });

                        // Middle Left
                        points.push({
                            x: 0,
                            y: canvas.height/2
                        });
                    }

                    if(angle >= eighth * 8) {

                        // Bottom Middle
                        points.push({
                            x: 0,
                            y: canvas.height
                        });
                    }

                    // End point
                    points.push({
                        x: canvas.width/2 + Math.sin(angle) * length,
                        y: canvas.height/2 + Math.cos(angle) * length
                    });

                    // Draw
                    context.beginPath();
                    context.moveTo(points[0].x, points[0].y);
                    for(var i=1; i<points.length; i++) {
                        var point = points[i];
                        context.lineTo(point.x, point.y);
                    }
                    context.fill();
                };

                // Animate
                var angle = 0;
                setInterval(function() {
                    draw(angle);
                    angle += 0.01;
                }, 20);
            }

            window.onload = init;

        </script>
    </head>
    <body>
        <canvas id="canvas"></canvas>
    </body>
</html>